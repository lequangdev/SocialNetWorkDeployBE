{
  "AllowedHosts": "*",
  "ReverseProxy": {
    "Routes": {
        "route-auth-register": {
            "ClusterId": "cluster-auth",
            "Match": { "Path": "/api-auth/auth/Register" },
            "Order": 1,
            "Transforms": [ { "PathPattern": "/api/AuthUser/InsertUser" } ]
        },
        "route-auth-login": { 
            "ClusterId": "cluster-auth",
            "Match": { "Path": "/api-auth/auth/Login" },
            "Order": 1,
            "Transforms": [ { "PathPattern": "/api/AuthUser/Login" } ]
        },
        "route-auth-secured": {
            "ClusterId": "cluster-auth",
            "Match": { "Path": "/api-auth/{**catch-all}" },
            "Order": 2,
            "Transforms": [
                { "PathPattern": "/api/{**catch-all}" },
                { "ResponseHeader": "Access-Control-Allow-Methods", "Set": "GET,POST,PUT,DELETE,OPTIONS" },
                { "ResponseHeader": "Access-Control-Allow-Headers", "Set": "*" },
                { "ResponseHeader": "Access-Control-Allow-Credentials", "Set": "true" }
            ]
        },
        "route-chat": {
            "ClusterId": "cluster-chat",
            "Match": { "Path": "/api-chat/{**catch-all}" },
            "Order": 1,
            "Transforms": [
                { "PathPattern": "/api/{**catch-all}" },
                { "ResponseHeader": "Access-Control-Allow-Methods", "Set": "GET,POST,PUT,DELETE,OPTIONS" },
                { "ResponseHeader": "Access-Control-Allow-Headers", "Set": "*" },
                { "ResponseHeader": "Access-Control-Allow-Credentials", "Set": "true" }
            ]
        },
        "route-post": {
            "ClusterId": "cluster-post",
            "Match": { "Path": "/api-post/{**catch-all}" },
            "Order": 1,
            "Transforms": [
                { "PathPattern": "/api/{**catch-all}" },
                { "ResponseHeader": "Access-Control-Allow-Methods", "Set": "GET,POST,PUT,DELETE,OPTIONS" },
                { "ResponseHeader": "Access-Control-Allow-Headers", "Set": "*" },
                { "ResponseHeader": "Access-Control-Allow-Credentials", "Set": "true" }
            ]
        },
        "route-chat-hub": {
            "ClusterId": "cluster-chat",
            "Match": {
                "Path": "/hubs/chat/{**catch-all}"
            }
        }
    },

    "Clusters": {
        "cluster-auth": {
            "Destinations": {
              "service": { "Address": "http://localhost:5200" }
            }
        },
        "cluster-chat": {
            "Destinations": {
              "service": { "Address": "http://localhost:5300" }
            }
        },
        "cluster-post": {
            "Destinations": {
              "service": { "Address": "http://localhost:5400" }
            }
        }
    }
  }
}
